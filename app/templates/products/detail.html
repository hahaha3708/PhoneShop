{% extends 'base.html' %} {% load static %} {% load currency %} {% block title
%}{{ product.name }} - PhoneShop {% block extra_head %}
<link rel="stylesheet" href="{% static 'css/product_detail.css' %}" />
{% endblock %} {% block content %}
<div class="container mt-4 product-detail">
  <div class="row g-4 align-items-start">
    <!-- Ảnh sản phẩm -->
    <div class="col-md-6 text-center">
      <img
        src="{{ product.image }}"
        alt="{{ product.name }}"
        class="img-fluid rounded border shadow-sm mb-3"
        id="main-product-image"
      />

      {% if product.gallery %}
      <div class="d-flex gap-2 justify-content-center mt-3">
        {% for img in product.gallery %}
        <img
          src="{{ img }}"
          alt="{{ product.name }} {{ forloop.counter }}"
          class="img-thumbnail gallery-thumb"
        />
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <!-- Thông tin sản phẩm -->
    <div class="col-md-6">
      <h1 class="h4 fw-bold mb-2">{{ product.name }}</h1>
      <div class="mb-2 text-muted">{{ product.brand|capfirst }}</div>

      <!-- Giá -->
      <div class="mb-3">
        <span
          class="fs-3 fw-bold text-danger"
          id="product-price"
          data-product-id="{{ product.id }}"
        >
          {{ product.price|vnd }}
        </span>
      </div>

      <!-- Dung lượng -->
      {% if product.capacities.all %}
      <div class="mb-3">
        <strong class="d-block mb-2">Dung lượng</strong>
        <div class="d-flex flex-wrap gap-2">
          {% for cap in product.capacities.all %}
          <button
            class="btn btn-outline-secondary capacity-btn"
            data-capacity="{{ cap.id }}"
          >
            {{ cap.name }}
          </button>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Màu sắc -->
      {% if product.colors.all %}
      <div class="mb-3">
        <strong class="d-block mb-2">Màu sắc</strong>
        <div class="d-flex flex-wrap gap-2">
          {% for color in product.colors.all %}
          <button
            class="btn btn-outline-secondary color-btn"
            data-color="{{ color.id }}"
          >
            {{ color.name }}
          </button>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Nút hành động -->
      <div class="d-flex gap-3 my-4">
        <a href="#" class="btn btn-lg btn-primary px-4" id="btnAddCart">
          <i class="bi bi-cart-plus"></i> Thêm vào giỏ
        </a>
        <a
          href="{% url 'shop:checkout' %}"
          class="btn btn-lg btn-outline-secondary px-4"
        >
          Mua ngay
        </a>
      </div>

      <!-- Thông số kỹ thuật -->
      <h5 class="fw-bold mb-2">Thông số kỹ thuật</h5>
      <ul class="list-group list-group-flush mb-4">
        <li class="list-group-item">
          <strong>Màn hình:</strong> {{ product.specs.display }}
        </li>
        <li class="list-group-item">
          <strong>Chip:</strong> {{ product.specs.chip }}
        </li>
        <li class="list-group-item">
          <strong>RAM/ROM:</strong> {{ product.specs.memory }}
        </li>
        <li class="list-group-item">
          <strong>Pin/Sạc:</strong> {{ product.specs.battery }}
        </li>
      </ul>
    </div>
  </div>

  <!-- Sản phẩm liên quan -->
  <hr class="my-5" />
  <h2 class="h5 mb-4 fw-bold">Sản phẩm liên quan</h2>
  <div class="row g-4">
    {% for p in related %}
    <div class="col-6 col-md-3">
      <a
        href="{% url 'shop:product_detail' p.slug %}"
        class="text-decoration-none text-dark"
      >
        <div class="card h-100 shadow-sm border-0">
          <img
            src="{{ p.image }}"
            class="card-img-top p-3"
            alt="{{ p.name }}"
            style="height: 200px; object-fit: contain"
          />
          <div class="card-body">
            <div class="small text-muted mb-1">{{ p.brand|capfirst }}</div>
            <h6 class="fw-semibold mb-2">{{ p.name }}</h6>
            <div class="text-danger fw-bold">{{ p.price|vnd }}</div>
          </div>
        </div>
      </a>
    </div>
    {% empty %}
    <p>Không có sản phẩm liên quan.</p>
    {% endfor %}
  </div>
</div>
{% endblock %} {% block extra_scripts %}
<script>
  const csrfToken = "{{ csrf_token }}";
</script>
<script src="{% static 'js/product_detail.js' %}"></script>
{% endblock %}
