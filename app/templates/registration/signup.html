{% extends "base.html" %} {% load static %} {% block content %}
<link rel="stylesheet" href="{% static 'css/signup.css' %}" />

<div class="signup-container py-5">
  <div
    class="card shadow-lg p-4 rounded-4"
    style="max-width: 700px; margin: auto"
  >
    <!-- Hiển thị lỗi nếu có -->
    {% if form.errors %}
    <div class="alert alert-danger">
      {% for field, errors in form.errors.items %} {% for error in errors %}
      <div><i class="bi bi-exclamation-circle"></i> {{ error }}</div>
      {% endfor %} {% endfor %}
    </div>
    {% endif %}

    <!-- Hiển thị thông báo thành công -->
    {% if messages %} {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %} {% endif %}

    <!-- Form đăng ký -->
    <form method="post" id="signupForm">
      {% csrf_token %}

      <!-- Thông tin cá nhân -->
      <h5 class="mb-3">Thông tin cá nhân</h5>
      <div class="row g-3">
        <div class="col-md-6">
          {{ form.first_name }} {% if form.first_name.errors %}
          <div class="text-danger small mt-1">
            {{ form.first_name.errors.0 }}
          </div>
          {% endif %}
        </div>
        <div class="col-md-6">
          {{ form.date_of_birth }} {% if form.date_of_birth.errors %}
          <div class="text-danger small mt-1">
            {{ form.date_of_birth.errors.0 }}
          </div>
          {% endif %}
        </div>
        <div class="col-md-6">
          {{ form.phone }} {% if form.phone.errors %}
          <div class="text-danger small mt-1">{{ form.phone.errors.0 }}</div>
          {% endif %}
        </div>
        <div class="col-md-6">
          {{ form.email }} {% if form.email.errors %}
          <div class="text-danger small mt-1">{{ form.email.errors.0 }}</div>
          {% endif %}
        </div>
      </div>

      <!-- Tạo mật khẩu -->
      <h5 class="mt-4 mb-3">Tạo mật khẩu</h5>
      <div class="row g-3">
        <div class="col-md-6">
          <div class="input-group">
            {{ form.password1 }}
            <span
              class="input-group-text toggle-password"
              onclick="togglePassword('{{ form.password1.id_for_label }}', this)"
            >
              <img src="{% static 'img/hide.png' %}" alt="toggle" width="20" />
            </span>
          </div>
          {% if form.password1.errors %}
          <div class="text-danger small mt-1">
            {{ form.password1.errors.0 }}
          </div>
          {% endif %}
          <small class="text-muted"
            >Mật khẩu tối thiểu 8 ký tự, có ít nhất 1 chữ số và 1 ký tự</small
          >
        </div>

        <div class="col-md-6">
          <div class="input-group">
            {{ form.password2 }}
            <span
              class="input-group-text toggle-password"
              onclick="togglePassword('{{ form.password2.id_for_label }}', this)"
            >
              <img src="{% static 'img/hide.png' %}" alt="toggle" width="20" />
            </span>
          </div>
          {% if form.password2.errors %}
          <div class="text-danger small mt-1">
            {{ form.password2.errors.0 }}
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Nhận tin khuyến mãi -->
      <div class="form-check mt-3">
        <input
          type="checkbox"
          class="form-check-input"
          id="promo"
          name="promo"
        />
        <label class="form-check-label" for="promo"
          >Đăng ký nhận tin khuyến mãi từ PhoneShop</label
        >
      </div>

      <!-- Nút hành động -->
      <div class="d-flex justify-content-between mt-4">
        <a href="{% url 'login' %}" class="btn btn-outline-secondary px-4"
          >Quay lại đăng nhập</a
        >
        <button type="submit" class="btn btn-danger px-4">
          Hoàn tất đăng ký
        </button>
      </div>
    </form>
  </div>
</div>

<script src="{% static 'js/signup.js' %}"></script>
{% endblock %}
